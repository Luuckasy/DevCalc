<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevEx Manager Pro v12</title>
    <link rel="icon" href="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c7/Robux_2019_Logo_gold.svg/500px-Robux_2019_Logo_gold.svg.png" type="image/png">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="app-container" id="app">
    <header>
        <div>
            <h2>DevEx Manager</h2>
            <div style="font-size: 0.7rem; color: #666;">Made by CL GAMES</div>
        </div>
        <div class="rate-badge">
            <span style="font-size: 0.8rem; color: var(--primary);">USD</span>
            <input type="number" id="usd-rate" class="rate-input" value="5.255" disabled step="0.001">
            <button class="icon-btn" id="btn-lock">üîí</button>
            <button class="icon-btn" id="btn-refresh">üîÑ</button>
        </div>
    </header>

    <div class="input-stack">
        <div class="big-input-group"><label>üéÆ ROBUX</label><input type="number" id="inp-robux" class="big-input" placeholder="0"></div>
        <div class="big-input-group"><label>üá∫üá∏ USD (Bruto)</label><input type="number" id="inp-usd" class="big-input" placeholder="0.00"></div>
        <div class="big-input-group"><label>üáßüá∑ BRL (L√≠quido)</label><input type="number" id="inp-brl" class="big-input" placeholder="0,00"></div>
    </div>

    <div class="settings-grid">
        <div class="small-input-group"><label>Taxa DevEx</label><select id="cfg-devex" class="small-input"><option value="0.0038" selected>Nova ($0.0038)</option><option value="0.0035">Antiga ($0.0035)</option></select></div>
        <div class="small-input-group"><label>Spread Banco (%)</label><input type="number" id="cfg-spread" class="small-input" value="2.0" placeholder="Ex: 2"></div>
        
        <div class="small-input-group"><label>Fee Banco ($)</label><input type="number" id="cfg-fee" class="small-input" value="26"></div>
        <div class="small-input-group"><label>Imposto (%)</label><input type="number" id="cfg-tax" class="small-input" value="10.82"></div>
        <div style="display:flex;align-items:center;gap:8px;padding-top:15px; grid-column: span 2;"><input type="checkbox" id="cfg-extra"><label for="cfg-extra" style="font-size:0.8rem;">+10% (Lucro > 50k)</label></div>
    </div>

    <div class="financial-summary">
        <div class="summary-row"><span>Bruto (BRL)</span><span id="res-gross-brl" class="val-gross">R$ 0,00</span></div>
        <div class="summary-row"><span>Impostos</span><span id="res-total-tax" class="val-tax">R$ 0,00</span></div>
        <div class="summary-row highlight"><span>L√çQUIDO</span><span id="res-net-brl" class="val-net">R$ 0,00</span></div>
        <div style="text-align: right; font-size: 0.7rem; color: #555; margin-top: 5px;">
            Cota√ß√£o Efetiva (P√≥s-Spread): <span id="effective-rate-display">R$ 0,00</span>
        </div>
        <button class="btn-invoice" id="open-invoice">üìÑ Gerar Invoice (Gamer)</button>
    </div>

    <div class="partners-section">
        <div class="partners-header">
            <span style="font-weight:bold;">S√≥cios / Divis√£o</span>
            <button class="btn-add" id="btn-add-partner">+ Add</button>
        </div>

        <div class="profile-bar" style="margin-bottom: 15px; border-bottom: 1px solid #ddd; padding-bottom: 10px;">
            <select id="sel-game-preset" class="profile-select">
                <option value="">Carregar Jogo...</option>
            </select>
            <button class="btn-save-profile" id="btn-save-game" title="Salvar configura√ß√£o atual como um Jogo">üíæ</button>
            <button class="btn-save-profile" id="btn-del-game" title="Apagar Preset" style="color:#ff4d4d;">üóëÔ∏è</button>
        </div>

        <div id="partners-list" class="partner-list"></div>
        <div style="margin-top:10px;text-align:right;font-size:0.75rem;color:#666;">Alocado: <span id="alloc-total">100%</span></div>
    </div>
</div>

<div id="invoice-modal">
    <div class="invoice-controls-panel">
        <h3>Customiza√ß√£o</h3>
        <label class="toggle-control"><input type="checkbox" id="check-watermark"> Marca D'√°gua</label>
        <div class="control-group">
            <label>Tipo de Logo:</label>
            <div style="display:flex; gap:10px;">
                <button class="btn-mini active" id="btn-mode-img">Imagem</button>
                <button class="btn-mini" id="btn-mode-text">Texto</button>
            </div>
        </div>
        <div class="control-group" id="ctrl-text-color" style="display:none;">
            <label>Cor do Logo:</label>
            <input type="color" id="inp-logo-color" value="#8a2be2">
        </div>
        <button class="btn-action btn-print" id="print-invoice">üñ®Ô∏è Salvar PDF</button>
        <button class="btn-action btn-close" id="close-invoice">Fechar</button>
    </div>

    <div class="invoice-paper">
        <div id="watermark-layer" class="watermark" style="display:none;"><img id="watermark-img" src="" alt=""></div>
        <div class="inv-top-bar">
            <div style="flex: 1;">
                <h1 class="inv-title-large">INVOICE</h1>
            </div>

            <div class="inv-logo-center">
                <div class="logo-area" id="logo-trigger">
                    <span class="logo-text" id="logo-text">CLIQUE P/ LOGO</span>
                    <img id="logo-img" alt="Logo">
                    <input type="file" id="logo-upload" accept="image/*" style="display:none">
                </div>
                <input class="editable logo-text-mode" id="logo-input-text" value="CL GAMES" style="display:none;">
            </div>

            <div class="inv-meta-block" style="flex: 1;">
                <div class="inv-meta-label">
                    INVOICE # 
                    <button class="btn-mini-icon no-print" id="btn-gen-id" title="Gerar ID">üé≤</button>
                </div>
                <input class="inv-meta-val" id="inv-num" value="#INV-001">
                
                <div class="inv-meta-label" style="margin-top:10px;">DATE</div>
                <input class="inv-meta-val" id="inv-date">
            </div>
        </div>

        <div class="inv-grid">
            <div class="inv-col">
                <div class="inv-label">FROM:</div>
                <div class="profile-bar"><select id="sel-profile-from" class="profile-select"><option value="">Perfil...</option></select><button class="btn-save-profile" onclick="saveProfile('from')">üíæ</button></div>
                <input class="editable bold-input" id="inv-from-name" placeholder="Sua Empresa"><textarea class="editable" id="inv-from-address" style="height:60px;" placeholder="Endere√ßo" oninput="autoResize(this)"></textarea>
            </div>
            <div class="inv-col">
                <div class="inv-label">BILL TO:</div>
                <div style="font-weight:bold; font-size:1.1rem; margin-bottom:5px;">Roblox Corporation</div>
                <div style="font-size:0.9rem; line-height:1.4;">970 Park Place, Suite 100<br>San Mateo, CA 94403<br>United States<br>devex@roblox.com</div>
            </div>
        </div>

        <table class="inv-table" id="inv-table">
            <thead><tr><th width="50%">DESCRIPTION</th><th width="15%" style="text-align:center;">QTY</th><th width="20%" style="text-align:right;">UNIT PRICE</th><th width="15%" style="text-align:right;">TOTAL</th><th width="5%" class="no-print"></th></tr></thead>
            <tbody id="inv-table-body"></tbody>
        </table>
        <button id="btn-add-row" class="btn-add-row no-print">+ Adicionar Item</button>

        <div class="inv-footer">
            <div class="inv-payment-info">
                <div class="inv-label">PAYMENT INFO</div>
                <div class="profile-bar"><select id="sel-profile-bank" class="profile-select"><option value="">Banco...</option></select><button class="btn-save-profile" onclick="saveProfile('bank')">üíæ</button></div>
                <textarea class="editable" id="inv-bank-details" style="height:100px; width:100%;" placeholder="Bank Details..." oninput="autoResize(this)"></textarea>
            </div>
            <div class="inv-total-area">
                <div class="total-row"><span>TOTAL AMOUNT</span><span id="inv-total-final">$0.00</span></div>
            </div>
        </div>
    </div>
</div>
<div id="toast">Salvo!</div>
<script src="script.js"></script>
</body>
</html>